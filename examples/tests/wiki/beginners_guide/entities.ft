use "../../../utils.ft"

test "0_simple_func_module.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "0_simple_func_module.ft";
	test_file_ok($"{path}/{file}", "x: 30\n");

test "1_function_collision.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "1_function_collision.ft";
	test_file_fail($"{path}/{file}", "Parse Error at tests/wiki/beginners_guide/entities/1_function_collision.ft:6:1\n└─┬┤E0000│\n6 │ def print(i32 x):\n┌─┴─┘\n├─ Redefinition of function: print(i32)\n└─ First defined at: Bmm6x3ZN:0:0\n");

test "2_requiring_data.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "2_requiring_data.ft";
	test_file_ok($"{path}/{file}", "pos: (100, 100), size: (100, 100)\npos: (110, 120), size: (100, 100)\n");

test "3_requiring_same_data_twice.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "3_requiring_same_data_twice.ft";
	test_file_fail($"{path}/{file}", "Parse Error at tests/wiki/beginners_guide/entities/3_requiring_same_data_twice.ft:8:33\n└─┬┤E0000│\n8 │ func MyFunc requires(MyData d1, MyData d2):\n┌─┴─────────────────────────────────┘\n├─ Requiring the same type twice: MyData\n└─ Each required data type needs to be unique\n");

test "4_requiring_multiple_data.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "4_requiring_multiple_data.ft";
	test_file_ok($"{path}/{file}", "pos: (100, 100), size: (100, 100), dir: (3.3, 2.2)\npos: (133, 144), size: (100, 100), dir: (3.3, 2.2)\n");

test "5_simple_entity.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "5_simple_entity.ft";
	test_file_ok($"{path}/{file}", "pos: (100, 120), size: (200, 220)\n");

test "6_encapsulation.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "6_encapsulation.ft";
	test_file_ok($"{path}/{file}", "pos: (100, 120), size: (200, 220)\ne.pos = (100, 120)\n");

test "7_missing_data.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "7_missing_data.ft";
	test_file_fail($"{path}/{file}", "Parse Error at tests/wiki/beginners_guide/entities/7_missing_data.ft:19:1\n└──┬┤E0000│\n19 │ entity Entity:\n┌──┴─┘\n└─ Entity type is missing data 'DScale' required by func module 'FMove'\n");

test "8_missing_data_fixed.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "8_missing_data_fixed.ft";
	test_file_ok($"{path}/{file}", "pos: (100, 120), size: (200, 220), scale: (3.3, 4.4)\ne.pos = (100, 120)\n");

test "9_composition.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "9_composition.ft";
	test_file_ok($"{path}/{file}", "Starting to run with my 4 legs with a speed of 30 km/h\nJumping 0.8m high with my 4 legs\n\nStarting to run with my 2 legs with a speed of 1.5 km/h\nJumping 0.1m high with my 2 legs\nStarting to fly for 100 seconds with my 10cm large wings\n");

test "10_extending_entities.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "10_extending_entities.ft";
	test_file_ok($"{path}/{file}", "f1: 100\n\nf1: 80\nf2: 3.4\n\nf1: 8\nf2: 3.14\nf3: -30\n");

test "11_duplicate_data_modules.ft":
	str path = "tests/wiki/beginners_guide/entities";
	str file = "11_duplicate_data_modules.ft";
	test_file_fail($"{path}/{file}", "Parse Error at tests/wiki/beginners_guide/entities/11_duplicate_data_modules.ft:38:11\n└──┬┤E0000│\n37 │ entity Entity3 extends(Entity2 e2):\n38 │ »   data: Data2, Data3;\n┌──┴───────────┘\n└─ Entity type defines data module 'Data2' twice\n");
